- name: Install dependencies
  run: |
    sudo apt-get update
    sudo apt-get install -y zip unzip openjdk-17-jdk python3-pip curl
    pip install --upgrade pip
    pip install --user buildozer==1.5.0 cython virtualenv
    echo "$HOME/.local/bin" >> $GITHUB_PATH
    export PATH="$HOME/.local/bin:$PATH"
    which buildozer || echo "❌ Buildozer binary not found"
    buildozer --version || echo "⚠️ Buildozer command not working"

- name: Build APK
  run: |
    export PATH="$HOME/.local/bin:$PATH"
    buildozer -v android debug
  env:
    PATH: ${{ env.PATH }}:$HOME/.local/bin:$HOME/android-sdk/platform-tools:$HOME/android-sdk/cmdline-tools/latest/bin:$HOME/android-ndk-r25b
