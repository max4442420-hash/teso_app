 name: Download Android SDK and NDK
  run: |
    mkdir -p $HOME/android-sdk/cmdline-tools
    cd $HOME/android-sdk/cmdline-tools

    echo "📦 Letöltjük az Android SDK command line tools-t..."
    curl -o sdk-tools.zip https://dl.google.com/android/repository/commandlinetools-linux-11076708_latest.zip
    unzip -q sdk-tools.zip -d cmdline-tools-temp
    rm sdk-tools.zip

    echo "📂 Átrendezzük a mappastruktúrát..."
    mkdir -p latest
    if [ -d "cmdline-tools-temp/cmdline-tools" ]; then
      mv cmdline-tools-temp/cmdline-tools/* latest/
    else
      mv cmdline-tools-temp/* latest/
    fi
    rm -rf cmdline-tools-temp

    echo "🔍 Ellenőrizzük az sdkmanager létezését..."
    if [ ! -f "$HOME/android-sdk/cmdline-tools/latest/bin/sdkmanager" ]; then
      echo "❌ sdkmanager nem található!"
      exit 1
    fi

    export ANDROID_SDK_ROOT=$HOME/android-sdk
    export PATH=$PATH:$HOME/android-sdk/cmdline-tools/latest/bin

    echo "✅ Licenszek elfogadása..."
    yes | sdkmanager --sdk_root=$ANDROID_SDK_ROOT --licenses > /dev/null

    echo "🧱 Telepítjük a szükséges komponenseket..."
    yes | sdkmanager --sdk_root=$ANDROID_SDK_ROOT \
      "platform-tools" "platforms;android-34" "build-tools;36.1.0" > /dev/null

    echo "✅ Build-tools ellenőrzése..."
    if [ ! -d "$ANDROID_SDK_ROOT/build-tools/36.1.0" ]; then
      echo "❌ build-tools 36.1.0 nem található!"
      ls -la $ANDROID_SDK_ROOT/build-tools/
      exit 1
    fi

    echo "📦 Android NDK letöltése..."
    cd $HOME
    curl -o ndk.zip https://dl.google.com/android/repository/android-ndk-r25b-linux.zip
    unzip -q ndk.zip
    rm ndk.zip

    echo "🛠️ PATH frissítése..."
    echo "$HOME/android-sdk/cmdline-tools/latest/bin" >> $GITHUB_PATH
    echo "$HOME/android-sdk/platform-tools" >> $GITHUB_PATH
    echo "$HOME/android-ndk-r25b" >> $GITHUB_PATH

    echo "✅ SDK és NDK telepítve!"
